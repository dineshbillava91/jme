/* * @contains Basic validation functions */$(document).ready(function(){		// Login 	$('#UserAdminLoginForm').validate({		rules: {			'data[User][username]': {				required: true,				minlength: 5			},			'data[User][password]': {				required: true,				minlength: 5			}		},		messages: {			'data[User][username]': {				required: 'This field is required',				minlength: 'Must be at least 5 characters long'			},			'data[User][password]': {				required: 'This field is required',				minlength: 'Must be at least 5 characters long'			}		}	});		// Change password	$.validator.addMethod("confirmPassword", function(value, element) { 		var new_password = $('#UserNewPassword').val();		if(value != new_password){			return false;		}else{			return true;		}  	});	$('#UserAdminChangePasswordForm').validate({		rules: {			'data[User][curr_password]': {				required: true,				minlength: 5			},			'data[User][new_password]': {				required: true,				minlength: 5			},			'data[User][con_password]': {				required: true,				minlength: 5,				confirmPassword: true,			}		},		messages: {			'data[User][curr_password]': {				required: 'This field is required',				minlength: 'Must be at least 5 characters long'			},			'data[User][new_password]': {				required: 'This field is required',				minlength: 'Must be at least 5 characters long'			},			'data[User][con_password]': {				required: 'This field is required',				minlength: 'Must be at least 5 characters long',				confirmPassword: "Passwords don't match"			}		}	});		// Category Add 	$('#CategoryAdminAddForm').validate({		rules: {			'data[CategoryLanguage][en]': {				required: true,				minlength: 3			},			'data[CategoryLanguage][es]': {				required: true,				minlength: 3			},			'data[CategoryLanguage][fr]': {				required: true,				minlength: 3			}		},		messages: {			'data[CategoryLanguage][en]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[CategoryLanguage][es]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[CategoryLanguage][fr]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			}		}	});		// Category Edit 	$('#CategoryAdminEditForm').validate({		rules: {			'data[CategoryLanguage][en]': {				required: true,				minlength: 3			},			'data[CategoryLanguage][es]': {				required: true,				minlength: 3			},			'data[CategoryLanguage][fr]': {				required: true,				minlength: 3			}		},		messages: {			'data[CategoryLanguage][en]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[CategoryLanguage][es]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[CategoryLanguage][fr]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			}		}	});		// Video Search	$('#VideoName').keypress(function(e){        if(e.which == 13){	//Enter key pressed            $('#search_videos').click();	//Trigger search button click event        }    });	$('#search_videos').click(function(){		var name = $.trim($('#VideoName').val());		var url = '';			if(name != ''){			url = '/admin/videos/search?q='+name;		}else{			url = '/admin/videos';		}				$('form').attr('action',url);		$('form').submit();			});		// Video Add 	$('#VideoAdminAddForm').validate({		rules: {			'data[VideoLanguage][title_en]': {				required: true,				minlength: 3			},			'data[VideoLanguage][description_en]': {				required: true,				minlength: 3			},			'data[Video][director]': {				required: true,				minlength: 3			},			'data[Video][youtube_url]': {				required: true,				minlength: 3			}		},		messages: {			'data[VideoLanguage][title_en]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[VideoLanguage][description_en]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[Video][director]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[Video][youtube_url]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			}		}	});		// Video Edit 	$('#VideoAdminEditForm').validate({		rules: {			'data[VideoLanguage][title_en]': {				required: true,				minlength: 3			},			'data[VideoLanguage][description_en]': {				required: true,				minlength: 3			},			'data[Video][director]': {				required: true,				minlength: 3			},			'data[Video][youtube_url]': {				required: true,				minlength: 3			}		},		messages: {			'data[VideoLanguage][title_en]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[VideoLanguage][description_en]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[Video][director]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			},			'data[Video][youtube_url]': {				required: 'This field is required',				minlength: 'Must be at least 3 characters long'			}		}	});	// Related Videos	$('a').click(function(){		var id = $(this).attr('id');		var video_id = $('#video_id').html();				var newHTML = '';		var director = '';		var category_id = '';		var relatedVideoIds = '';				switch(id){			case 'show_videos':							var i = true;				$('#VideoRelateRelatedVideo option').each(function(){					if(i){						relatedVideoIds = $(this).val();						i = false;					}else{						relatedVideoIds += ', '+$(this).val();					}				});								// Search				director = $.trim($('#VideoRelateDirector').val());				category_id = $('#VideoRelateCategoryId').val();								$.ajax({					type: 'POST',					url: '/admin/video_relates/select_videos_list',					data: {'data[VideoRelate][director]': director, 'data[VideoRelate][category_id]':category_id, 'data[VideoRelate][related_video_ids]':relatedVideoIds, 'data[Video][id]':video_id},					success: function(response){						$('#select_videos_list').html(response);					}				});				$('.pagination a').live('click',function(){					var url = $(this).attr('href');					$.ajax({						type: 'POST',						url: url,						data: {'data[Video][id]':video_id},						success: function(response){							$('#select_videos_list').html(response);						}					});					return false;				});			break;					case 'moveToRelated':								// Move selected video from Left to Right Panel				var i = true;				var flag = false;				newHTML = $('#VideoRelateRelatedVideo').html();								$('#VideoRelateSelectedVideo option:selected').each(function(){					newHTML += '<option value="'+$(this).val()+'">'+$(this).text()+'</option>';					$(this).remove();					flag = true;				});				if(flag){					$('#VideoRelateRelatedVideo').html(newHTML);					$('#VideoRelateRelatedVideo option').each(function(){						if(i){							relatedVideoIds = $(this).val();							i = false;						}else{							relatedVideoIds += ', '+$(this).val();						}					});					director = $.trim($('#VideoRelateDirector').val());					category_id = $('#VideoRelateCategoryId').val();					$.ajax({						type: 'POST',						url: '/admin/video_relates/select_videos_list',						data: {'data[VideoRelate][director]': director, 'data[VideoRelate][category_id]':category_id, 'data[VideoRelate][related_video_ids]':relatedVideoIds, 'data[Video][id]':video_id},						success: function(response){							$('#select_videos_list').html(response);						}					});				}else{					alert('Please select atleast one video from Selected Videos');				}			break;						case 'moveToSelected':								// Move selected video from Left to Right Panel				var i = true;				var flag = false;				newHTML = $('#VideoRelateSelectedVideo').html();								$('#VideoRelateRelatedVideo option:selected').each(function(){					newHTML += '<option value="'+$(this).val()+'">'+$(this).text()+'</option>';					$(this).remove();					flag = true;				});				if(flag){					$('#VideoRelateSelectedVideo').html(newHTML);					$('#VideoRelateRelatedVideo option').each(function(){						if(i){							relatedVideoIds = $(this).val();							i = false;						}else{							relatedVideoIds += ', '+$(this).val();						}					});					director = $.trim($('#VideoRelateDirector').val());					category_id = $('#VideoRelateCategoryId').val();					$.ajax({						type: 'POST',						url: '/admin/video_relates/select_videos_list',						data: {'data[VideoRelate][director]': director, 'data[VideoRelate][category_id]':category_id, 'data[VideoRelate][related_video_ids]':relatedVideoIds, 'data[Video][id]':video_id},						success: function(response){							$('#select_videos_list').html(response);						}					});				}else{					alert('Please select atleast one video from Selected Videos');				}			break;		}			});		// Manage Related Videos Add	$('#saveAddRelatedVideos').click(function(){		var i = true;		var selected_id = '';		var relatedVideoIds = '';		var video_id = $('#video_id').html();				$('#VideoRelateRelatedVideo option').each(function(){			selected_id = $(this).val();				if(i){				relatedVideoIds = selected_id;				i = false;			}else{				relatedVideoIds += ', '+selected_id;			}		});				if(relatedVideoIds != ''){			$('#VideoRelateRelatedVideoIds').val(relatedVideoIds);			$('#VideoRelateAdminAddForm').submit();		}else{			$('#VideoRelateAdminAddForm').submit();		}			});		// Manage Related Videos Edit	$('#saveEditRelatedVideos').click(function(){		var i = true;		var selected_id = '';		var relatedVideoIds = '';		var video_id = $('#video_id').html();				$('#VideoRelateRelatedVideo option').each(function(){			selected_id = $(this).val();				if(i){				relatedVideoIds = selected_id;				i = false;			}else{				relatedVideoIds += ', '+selected_id;			}		});				if(relatedVideoIds != ''){			$('#VideoRelateRelatedVideoIds').val(relatedVideoIds);			$('#VideoRelateAdminEditForm').submit();		}else{			$('#VideoRelateAdminEditForm').submit();		}			});	}); 